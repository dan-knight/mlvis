(this.webpackJsonpmlvis=this.webpackJsonpmlvis||[]).push([[0],{43:function(e,t,a){e.exports=a(81)},48:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),c=a.n(i),s=(a(48),a(16)),o=a(12),u=a(11),l=a(6),h=a.n(l),f=a(14),p=a(2),m=a(3),v=a(5),g=a(4);function d(e,t){var a=t.startsWith(".")?t:"."+t;return e.endsWith(a)?e:e+a}function y(e){return e.reduce((function(e,t){return e<t?t:e}),0)}function b(e,t){var a=(e[1]-e[0])/t;return Array.from(Object(s.a)(Array(t+1).keys()),(function(t){return e[0]+t*a}))}var S=function(e){return new Promise((function(t){return setTimeout(t,e)}))},x=r.a.memo((function(e){return r.a.createElement("g",{fill:"red"},e.xData.map((function(t,a){return r.a.createElement("circle",{cx:e.xScale(t),cy:e.yScale(e.yData[a]),key:a,r:2})})))})),k=r.a.memo((function(e){function t(t){return e.coefficients.reduce((function(e,a,n){return e+a*Math.pow(t,n)}))}return r.a.createElement("path",{d:function(){for(var a=e.xPoints[0],n="M".concat(e.xScale(a)," ").concat(e.yScale(t(a))),r=1;r<e.xPoints.length;r++){var i=e.xPoints[r];n+=" L".concat(e.xScale(i)," ").concat(e.yScale(t(i)))}return n}(),stroke:e.color,fill:"none"})})),E=r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{label:e.xLabel,xScale:e.xScale,yScale:e.yScale,tickSize:e.tickSize,fontSize:e.fontSize}),r.a.createElement(w,{label:e.yLabel,xScale:e.xScale,yScale:e.yScale,tickSize:e.tickSize,fontSize:e.fontSize}))})),j=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).fontSize=1.4*e.props.fontSize,e}return Object(m.a)(a,[{key:"getD",value:function(){return""}},{key:"getLabelX",value:function(){return 0}},{key:"getLabelY",value:function(){return 0}},{key:"getLabelDY",value:function(){return 0}},{key:"getTransform",value:function(){return""}},{key:"getTicks",value:function(){return null}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("g",{fill:"none",stroke:"black"},r.a.createElement("path",{d:this.getD()})),r.a.createElement("text",{x:this.getLabelX(),y:this.getLabelY(),textAnchor:"middle",transform:this.getTransform(),fontSize:this.fontSize,dy:this.getLabelDY()},this.props.label),this.getTicks())}}]),a}(n.Component),O=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getD",value:function(){var e=this.props.xScale.range()[0],t=this.props.yScale.range()[0],a=this.props.xScale.range()[1];return"M".concat(e," ").concat(t," H").concat(a)}},{key:"getLabelX",value:function(){return(this.props.xScale.range()[1]-this.props.xScale.range()[0])/2+this.props.xScale.range()[0]}},{key:"getLabelY",value:function(){return 575}},{key:"getLabelDY",value:function(){return-.25*this.fontSize}},{key:"getTicks",value:function(){return r.a.createElement(z,{xScale:this.props.xScale,yScale:this.props.yScale,tickSize:this.props.tickSize,fontSize:this.fontSize})}}]),a}(j),w=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getD",value:function(){var e=this.props.xScale.range()[0],t=this.props.yScale.range()[0],a=this.props.yScale.range()[1];return"M".concat(e," ").concat(t," V").concat(a)}},{key:"getLabelX",value:function(){return this.props.yScale.range()[0]/2*-1}},{key:"getLabelY",value:function(){return 0}},{key:"getLabelDY",value:function(){return this.fontSize}},{key:"getTransform",value:function(){return"rotate(270)"}},{key:"getTicks",value:function(){return r.a.createElement(F,{xScale:this.props.xScale,yScale:this.props.yScale,tickSize:this.props.tickSize,fontSize:this.fontSize})}}]),a}(j),D=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).fontSize=.6*e.props.fontSize,e}return Object(m.a)(a,[{key:"getDivisions",value:function(){return[]}},{key:"getD",value:function(e){return""}},{key:"getTextX",value:function(e){return 0}},{key:"getTextY",value:function(e){return 0}},{key:"getTextDY",value:function(){return 0}},{key:"getTextAnchor",value:function(){return""}},{key:"render",value:function(){var e=this,t=this.getDivisions();return r.a.createElement(r.a.Fragment,null,r.a.createElement("g",{stroke:"black",fill:"none"},t.map((function(t,a){return r.a.createElement("path",{d:e.getD(t),key:"path".concat(a)})}))),r.a.createElement("g",{fontSize:this.fontSize,textAnchor:this.getTextAnchor()},t.map((function(t,a){return r.a.createElement("text",{x:e.getTextX(t),y:e.getTextY(t),dy:e.getTextDY(),key:"text".concat(a)},t.toFixed(1))}))))}}]),a}(n.PureComponent),z=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getDivisions",value:function(){return b(this.props.xScale.domain(),10)}},{key:"getD",value:function(e){return"M".concat(this.props.xScale(e)," ").concat(this.props.yScale.range()[0]," v").concat(this.props.tickSize)}},{key:"getTextX",value:function(e){return this.props.xScale(e)}},{key:"getTextY",value:function(e){return this.props.yScale.range()[0]+this.props.tickSize}},{key:"getTextDY",value:function(){return this.fontSize}},{key:"getTextAnchor",value:function(){return"middle"}}]),a}(D),F=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getDivisions",value:function(){return b(this.props.yScale.domain(),10)}},{key:"getD",value:function(e){return"M".concat(this.props.xScale.range()[0]," ").concat(this.props.yScale(e)," h-").concat(this.props.tickSize)}},{key:"getTextX",value:function(e){return this.props.xScale.range()[0]-this.props.tickSize-this.fontSize/2}},{key:"getTextY",value:function(e){return this.props.yScale(e)}},{key:"getTextDY",value:function(){return this.fontSize/2}},{key:"getTextAnchor",value:function(){return"end"}}]),a}(D),C=a(17),L=a(80),T=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).fontSize=16,e.tickSize=5,e.getXScale=Object(C.a)((function(e,t){return L.scaleLinear().domain([0,1.1*y(e)]).range([t-825,t-25])})),e.getYScale=Object(C.a)((function(e){return L.scaleLinear().domain([0,1.1*y(e)]).range([475,25])})),e.getXLinePoints=Object(C.a)((function(e){return b(e.domain(),1e3)})),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.getXScale(this.props.xData,this.props.width),t=this.getYScale(this.props.yData),a=this.getXLinePoints(e);return r.a.createElement("svg",{viewBox:"0 0 ".concat(this.props.width," ").concat(this.props.height)},this.props.lines.map((function(n,i){return r.a.createElement(k,{coefficients:n.theta,key:i,xScale:e,yScale:t,xPoints:a,color:"lightblue"})})),r.a.createElement(x,{xData:this.props.xData,yData:this.props.yData,xScale:e,yScale:t}),r.a.createElement(E,{xLabel:this.props.xName,yLabel:this.props.yName,xScale:e,yScale:t,tickSize:this.tickSize,fontSize:this.fontSize}))}}]),a}(n.PureComponent),A=a(38);function N(e){return r.a.createElement("div",null,"active"!==e.status?"complete"!==e.status?r.a.createElement(A.a,{variant:"outline-primary",onClick:e.onStart},"Start"):null:r.a.createElement(A.a,{variant:"outline-primary",onClick:e.onPause},"Pause"),"clean"!==e.status?r.a.createElement(A.a,{variant:"outline-primary",onClick:e.onReset},"Reset"):null)}var M=a(85),P=a(83),Y=a(84),X=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getDisabled",value:function(){return"clean"!==this.props.status}},{key:"render",value:function(){}}]),a}(n.PureComponent),R=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,this.props.label),this.props.options.map((function(t,a){return r.a.createElement(I,{label:t,checked:e.props.value===t,disabled:e.getDisabled(),onClick:e.props.onChange})})))}}]),a}(X);function I(e){return r.a.createElement("div",{className:"mb-3"},r.a.createElement(M.a.Radio,{checked:e.checked,value:e.label,disabled:e.disabled,onClick:function(t){e.onClick(t.target.value)}}),r.a.createElement(M.a.Text,{className:"mx-2"},e.label))}var B=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-1"},this.props.label),r.a.createElement(P.a,{toggle:!0},this.props.options.map((function(t,a){return r.a.createElement(Y.a,{key:a,"data-key":a,type:"radio",variant:"outline-primary",value:t.value,checked:e.props.value===t.value,disabled:e.getDisabled(),onChange:function(t){return e.props.onChange(e.props.name,t.target.value)}},t.text?t.text:t.value)}))))}}]),a}(X),W=r.a.memo((function(e){return r.a.createElement("div",{className:"row"},e.children)})),V=r.a.memo((function(e){return r.a.createElement("div",{className:"col-lg-".concat(e.size," p-4")},r.a.createElement("div",{className:"rounded bg-white p-1"},r.a.createElement("div",{className:"m-4"},e.children)))})),q=r.a.memo((function(e){return r.a.createElement("div",{className:"mb-4"},e.children)})),J=r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,[{name:"maxIter",label:"Maximum Iterations",options:[{value:"1000"},{value:"100"},{value:"10"}]},{name:"learningRate",label:"Learning Rate",options:[{value:"1"},{value:"0.1"},{value:"0.01"},{value:"0.001"},{value:"0.0001"}]},{name:"precision",label:"Precision Threshold",options:[{value:"0.001"},{value:"0.0001"},{value:"0.00001"}]}].map((function(t,a){return r.a.createElement(q,null,r.a.createElement(B,{name:t.name,label:t.label,options:t.options,value:e.stateSettings[t.name],onChange:e.onChange,status:e.status,key:a}))})))})),H=r.a.memo((function(e){return r.a.createElement(R,{options:e.options,label:e.label,status:e.status,value:e.value,onChange:function(t){e.onChange(t,e.name)}})})),U=a(50).default,$=a(19);function G(e,t){return K.apply(this,arguments)}function K(){return(K=Object(f.a)(h.a.mark((function e(t,a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/mlvis/data/"+d(t,a),e.next=3,U.get(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t,"csv");case 2:return a=e.sent,e.abrupt("return",$.fromCSV(a,{dynamicTyping:!0}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=a(19),ee=a(76);function te(e,t){return function(e){var t=e.left.getColumnNames(),a=e.right.getColumnNames().map((function(t){return e.right.getSeries(t)}));function n(e){return a.reduce((function(a,n,r){return Object(o.a)(Object(o.a)({},a),{},Object(u.a)({},r,function(e,a){return t.reduce((function(t,n,r){return t+a.at(r)*e[n]}),0)}(e,n)))}),{})}var r=[];return e.left.forEach((function(e){var t=n(e);r.push(t)})),new _.DataFrame(r)}(function(){var a={data:t,shape:[]};function n(){ee(a.shape.rows==r.shape.columns,"Matrix shapes do not match.")}var r=function(){var t;if(ie(e))t=e,re(e);else{if(!ce(e)&&!Array.isArray(e))throw"First term must be a data-forge DataFrame/Series or array.";t=new _.DataFrame({columns:{0:e}})}return{data:t,shape:re(t)}}();if(ie(a.data))a.shape=re(a.data),a.shape.rows!=r.shape.columns&&(ee(a.shape.columns=r.shape.columns,"Matrix shapes do not match."),a.data=ae(a.data),a.shape=re(a.data));else if(ce(a.data))a.shape={rows:a.data.count(),columns:1},n(),a.data=a.data.inflate((function(e){return{0:e}}));else{if(!Array.isArray(a.data))throw"Second term must be an array or a DataFrame/Series.";a.shape=function(e){return{rows:e.length,columns:1}}(a.data),n(),a.data=new _.DataFrame({columns:{0:a.data}})}return{left:r.data,right:a.data}}())}function ae(e){var t={};return function(e){var t;if(ie(e))t=e;else{if(!ce(e)&&!Array.isArray(e))throw"Data must be an array or a DataFrame/Series.";t=new _.DataFrame({columns:{0:e}})}return t}(e).deflate().forEach((function(e,a){return t[a]=Object.values(e)})),new _.DataFrame({columns:t})}function ne(e){var t;if(ce(e))t=e;else{if(!Array.isArray(e))throw new Error("Data must be a Series or an array.");t=new _.Series(e)}return t}function re(e){return{rows:e.count(),columns:e.getColumnNames().length}}function ie(e){return e instanceof _.DataFrame}function ce(e){return e instanceof _.Series}function se(e,t){var a=ne(e),n=ne(t),r=ue(a),i=oe(null,r),c=ue(n),s=oe(null,c);return function(e,t){return te(ae(e),t).deflate().toArray()[0][0]/(e.count()-1)}(r,c)/(i*s)}function oe(e,t){t||(t=ue(ne(e)));var a=te(ae(t),t).deflate().toArray()[0][0];return Math.sqrt(a/(t.count()-1))}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t||(t=e.average()),e.select((function(e){return e-t}))}var le=a(19);function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pe();function n(){var a=e,n=Object(s.a)(Array(t+1).keys()).reduce((function(e,t,n){return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},n,a.select((function(e){return Math.pow(e,t)}))))}),{});return new le.DataFrame({columns:n})}var r=n(),i=a,c=function(){try{return se(e,a)}catch(t){return null}};return{xData:r,transposeX:ae(r),yData:i,m:r.count(),n:r.getColumnNames().length,correlation:c()}}function fe(e,t){var a=te(e.xData,t).getSeries("0"),n=function(){var t=[];return a.forEach((function(a,n){t.push(a-e.yData.at(n))})),t}();return{theta:t,values:a,errors:n,cost:function(){var t=e.yData.count();return n.reduce((function(e,t){return e+Math.pow(t,2)}),0)/(2*t)}()}}var pe=function(){return new le.Series([])};function me(e){return r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-check2",fill:"green",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"}))}function ve(e){return r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",class:"bi bi-x",fill:"red",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{"fill-rule":"evenodd",d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"}))}function ge(e){return r.a.createElement("p",null,function(e,t){if(t>2){var a=2/Math.sqrt(t-1);return Math.abs(e)>=a}return!1}(e.model.correlation,e.model.m)?r.a.createElement(me,null):r.a.createElement(ve,null)," Correlation: ".concat(e.model.correlation.toFixed(2)))}var de=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).fitLine=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.iter<e.state.settings.maxIter?Promise.all([new Promise((function(t){t(e.gradientDescent())})),S(e.state.prevCost*e.state.settings.intervalLength)]).then((function(t){if("active"===e.state.status){var a=t[0];e.setState(a)}})):e.setState({status:"complete"});case 1:case"end":return t.stop()}}),t)}))),e.handleStart=function(){if("clean"===e.state.status){var t=new Array(e.state.model.n).fill(0);e.setState({predictions:[fe(e.state.model,t)]})}e.setState({status:"active"})},e.handlePause=function(){e.setState({status:"paused"})},e.handleReset=function(){e.setState((function(){return{status:"clean",iter:0,prevCost:0,predictions:[]}}))},e.handleFeatureChange=function(t,a){var n;e.setState((function(){return Object(u.a)({},a,t)}));var r="xFeature"===a?[t,e.state.yFeature]:[e.state.xFeature,t];(n=e).changeFeatures.apply(n,r)},e.handleChangeSetting=function(t,a){e.setState({settings:Object(o.a)(Object(o.a)({},e.state.settings),{},Object(u.a)({},t,a))})},e.state={testVal:0,data:new $.DataFrame({values:[]}),model:he(),xFeature:"",yFeature:"",predictions:[],status:"clean",iter:0,prevCost:0,settings:{maxIter:"1000",learningRate:"1",precision:"0.001",intervalLength:"1000"}},e}return Object(m.a)(a,[{key:"importData",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,Q(t);case 3:e.t1=e.sent,e.t2={data:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q("fish");case 2:t=e.sent,this.setState((function(){return{data:t}})),a=t.getColumnNames(),this.changeFeatures(a[0],a[1],t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){"active"==this.state.status&&this.fitLine()}},{key:"changeFeatures",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.data,n=he(a.getSeries(e),1,a.getSeries(t));this.setState({xFeature:e,yFeature:t,model:n,predictions:[]})}},{key:"gradientDescent",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,i,c=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.predictions[this.state.predictions.length-1],a=function(){var e=te(t.errors,c.state.model.transposeX);return t.theta.map((function(t,a){return t-c.state.settings.learningRate/c.state.model.m*e.at(a)[0]}))},n=fe(this.state.model,a()),r=(t.cost-n.cost)/t.cost,i={predictions:[].concat(Object(s.a)(this.state.predictions),[n]),iter:this.state.iter+1,prevCost:r},r<this.state.settings.precision&&(i.status="complete"),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{class:"container"},r.a.createElement(W,null,r.a.createElement(V,{size:"3"},r.a.createElement(H,{name:"xFeature",label:"x Feature",options:this.state.data.getColumnNames().filter((function(t){return t!==e.state.yFeature})),status:this.state.status,value:this.state.xFeature,onChange:this.handleFeatureChange}),r.a.createElement(H,{name:"yFeature",label:"y Feature",options:this.state.data.getColumnNames().filter((function(t){return t!==e.state.xFeature})),status:this.state.status,value:this.state.yFeature,onChange:this.handleFeatureChange}),null!==this.state.model.correlation&&r.a.createElement(ge,{model:this.state.model})),r.a.createElement(V,{size:"9"},r.a.createElement(T,{width:"925",height:"575",xData:this.state.model.xData.getSeries("1").toArray(),xName:this.state.xFeature,yData:this.state.model.yData.toArray(),yName:this.state.yFeature,lines:this.state.predictions}))),r.a.createElement(W,null,r.a.createElement(V,{size:"6"},r.a.createElement(J,{onChange:this.handleChangeSetting,stateSettings:this.state.settings,status:this.state.status})),r.a.createElement(V,{size:"6"},r.a.createElement(q,null,r.a.createElement(N,{onStart:this.handleStart,onPause:this.handlePause,onReset:this.handleReset,status:this.state.status})),"Iterations: ".concat(this.state.iter," "))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.a892ced0.chunk.js.map