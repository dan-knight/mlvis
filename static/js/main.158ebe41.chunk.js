(this.webpackJsonpmlvis=this.webpackJsonpmlvis||[]).push([[0],{43:function(e,t,a){e.exports=a(81)},48:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),c=a.n(i),s=(a(48),a(15)),o=a(10),u=a(9),l=a(5),p=a.n(l),f=a(12),h=a(1),m=a(2),v=a(4),g=a(3);function y(e,t){var a=t.startsWith(".")?t:"."+t;return e.endsWith(a)?e:e+a}function d(e){return e.reduce((function(e,t){return e<t?t:e}),0)}function S(e,t){var a=(e[1]-e[0])/t;return Array.from(Object(s.a)(Array(t+1).keys()),(function(t){return e[0]+t*a}))}var b=function(e){return new Promise((function(t){return setTimeout(t,e)}))},k=r.a.memo((function(e){return r.a.createElement("g",{fill:"red"},e.xData.map((function(t,a){return r.a.createElement("circle",{cx:e.xScale(t),cy:e.yScale(e.yData[a]),key:a,r:2})})))})),x=r.a.memo((function(e){function t(t){return e.coefficients.reduce((function(e,a,n){return e+a*Math.pow(t,n)}))}return r.a.createElement("path",{d:function(){for(var a=e.xPoints[0],n="M".concat(e.xScale(a)," ").concat(e.yScale(t(a))),r=1;r<e.xPoints.length;r++){var i=e.xPoints[r];n+=" L".concat(e.xScale(i)," ").concat(e.yScale(t(i)))}return n}(),stroke:e.color,fill:"none"})})),j=r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{label:e.xLabel,xScale:e.xScale,yScale:e.yScale,tickSize:e.tickSize,fontSize:e.fontSize}),r.a.createElement(E,{label:e.yLabel,xScale:e.xScale,yScale:e.yScale,tickSize:e.tickSize,fontSize:e.fontSize}))})),O=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).fontSize=1.4*e.props.fontSize,e}return Object(m.a)(a,[{key:"getD",value:function(){return""}},{key:"getLabelX",value:function(){return 0}},{key:"getLabelY",value:function(){return 0}},{key:"getLabelDY",value:function(){return 0}},{key:"getTransform",value:function(){return""}},{key:"getTicks",value:function(){return null}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("g",{fill:"none",stroke:"black"},r.a.createElement("path",{d:this.getD()})),r.a.createElement("text",{x:this.getLabelX(),y:this.getLabelY(),textAnchor:"middle",transform:this.getTransform(),fontSize:this.fontSize,dy:this.getLabelDY()},this.props.label),this.getTicks())}}]),a}(n.Component),D=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getD",value:function(){var e=this.props.xScale.range()[0],t=this.props.yScale.range()[0],a=this.props.xScale.range()[1];return"M".concat(e," ").concat(t," H").concat(a)}},{key:"getLabelX",value:function(){return(this.props.xScale.range()[1]-this.props.xScale.range()[0])/2+this.props.xScale.range()[0]}},{key:"getLabelY",value:function(){return 575}},{key:"getLabelDY",value:function(){return-.25*this.fontSize}},{key:"getTicks",value:function(){return r.a.createElement(z,{xScale:this.props.xScale,yScale:this.props.yScale,tickSize:this.props.tickSize,fontSize:this.fontSize})}}]),a}(O),E=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getD",value:function(){var e=this.props.xScale.range()[0],t=this.props.yScale.range()[0],a=this.props.yScale.range()[1];return"M".concat(e," ").concat(t," V").concat(a)}},{key:"getLabelX",value:function(){return this.props.yScale.range()[0]/2*-1}},{key:"getLabelY",value:function(){return 0}},{key:"getLabelDY",value:function(){return this.fontSize}},{key:"getTransform",value:function(){return"rotate(270)"}},{key:"getTicks",value:function(){return r.a.createElement(L,{xScale:this.props.xScale,yScale:this.props.yScale,tickSize:this.props.tickSize,fontSize:this.fontSize})}}]),a}(O),w=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).fontSize=.6*e.props.fontSize,e}return Object(m.a)(a,[{key:"getDivisions",value:function(){return[]}},{key:"getD",value:function(e){return""}},{key:"getTextX",value:function(e){return 0}},{key:"getTextY",value:function(e){return 0}},{key:"getTextDY",value:function(){return 0}},{key:"getTextAnchor",value:function(){return""}},{key:"render",value:function(){var e=this,t=this.getDivisions();return r.a.createElement(r.a.Fragment,null,r.a.createElement("g",{stroke:"black",fill:"none"},t.map((function(t,a){return r.a.createElement("path",{d:e.getD(t),key:"path".concat(a)})}))),r.a.createElement("g",{fontSize:this.fontSize,textAnchor:this.getTextAnchor()},t.map((function(t,a){return r.a.createElement("text",{x:e.getTextX(t),y:e.getTextY(t),dy:e.getTextDY(),key:"text".concat(a)},t.toFixed(1))}))))}}]),a}(n.PureComponent),z=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getDivisions",value:function(){return S(this.props.xScale.domain(),10)}},{key:"getD",value:function(e){return"M".concat(this.props.xScale(e)," ").concat(this.props.yScale.range()[0]," v").concat(this.props.tickSize)}},{key:"getTextX",value:function(e){return this.props.xScale(e)}},{key:"getTextY",value:function(e){return this.props.yScale.range()[0]+this.props.tickSize}},{key:"getTextDY",value:function(){return this.fontSize}},{key:"getTextAnchor",value:function(){return"middle"}}]),a}(w),L=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getDivisions",value:function(){return S(this.props.yScale.domain(),10)}},{key:"getD",value:function(e){return"M".concat(this.props.xScale.range()[0]," ").concat(this.props.yScale(e)," h-").concat(this.props.tickSize)}},{key:"getTextX",value:function(e){return this.props.xScale.range()[0]-this.props.tickSize-this.fontSize/2}},{key:"getTextY",value:function(e){return this.props.yScale(e)}},{key:"getTextDY",value:function(){return this.fontSize/2}},{key:"getTextAnchor",value:function(){return"end"}}]),a}(w),T=a(17),C=a(80),A=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).fontSize=16,e.tickSize=5,e.getXScale=Object(T.a)((function(e,t){return C.scaleLinear().domain([0,1.1*d(e)]).range([t-825,t-25])})),e.getYScale=Object(T.a)((function(e){return C.scaleLinear().domain([0,1.1*d(e)]).range([475,25])})),e.getXLinePoints=Object(T.a)((function(e){return S(e.domain(),1e3)})),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.getXScale(this.props.xData,this.props.width),t=this.getYScale(this.props.yData),a=this.getXLinePoints(e);return r.a.createElement("svg",{viewBox:"0 0 ".concat(this.props.width," ").concat(this.props.height)},this.props.lines.map((function(n,i){return r.a.createElement(x,{coefficients:n.theta,key:i,xScale:e,yScale:t,xPoints:a,color:"lightblue"})})),r.a.createElement(k,{xData:this.props.xData,yData:this.props.yData,xScale:e,yScale:t}),r.a.createElement(j,{xLabel:"Sepal Width",yLabel:"Sepal Length",xScale:e,yScale:t,tickSize:this.tickSize,fontSize:this.fontSize}))}}]),a}(n.PureComponent),F=a(38);function P(e){return r.a.createElement("div",null,"active"!==e.status?"complete"!==e.status?r.a.createElement(F.a,{variant:"outline-primary",onClick:e.onStart},"Start"):null:r.a.createElement(F.a,{variant:"outline-primary",onClick:e.onPause},"Pause"),"clean"!==e.status?r.a.createElement(F.a,{variant:"outline-primary",onClick:e.onReset},"Reset"):null)}var Y=a(83),X=a(84),M=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"getDisabled",value:function(){return"clean"!==this.props.status}},{key:"render",value:function(){}}]),a}(n.PureComponent),N=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-1"},this.props.label),r.a.createElement(Y.a,{toggle:!0},this.props.options.map((function(t,a){return r.a.createElement(X.a,{key:a,"data-key":a,type:"radio",variant:"outline-primary",value:t.value,checked:e.props.value===t.value,disabled:e.getDisabled(),onChange:function(t){return e.props.onChange(e.props.name,t.target.value)}},t.text?t.text:t.value)}))))}}]),a}(M),R=r.a.memo((function(e){return r.a.createElement("div",{className:"row"},e.children)})),I=r.a.memo((function(e){return r.a.createElement("div",{className:"col-lg-".concat(e.size," p-4")},r.a.createElement("div",{className:"rounded bg-white p-1"},r.a.createElement("div",{className:"m-4"},e.children)))})),W=r.a.memo((function(e){return r.a.createElement("div",{className:"mb-4"},e.children)})),B=r.a.memo((function(e){return r.a.createElement(r.a.Fragment,null,[{name:"maxIter",label:"Maximum Iterations",options:[{value:"1000"},{value:"100"},{value:"10"}]},{name:"learningRate",label:"Learning Rate",options:[{value:"1"},{value:"0.1"},{value:"0.01"}]},{name:"precision",label:"Precision Threshold",options:[{value:"0.001"},{value:"0.0001"},{value:"0.00001"}]}].map((function(t,a){return r.a.createElement(W,null,r.a.createElement(N,{name:t.name,label:t.label,options:t.options,value:e.stateSettings[t.name],onChange:e.onChange,status:e.status,key:a}))})))})),V=a(50).default,J=a(19);function _(e,t){return H.apply(this,arguments)}function H(){return(H=Object(f.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/data/"+y(t,a),e.next=3,V.get(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return $.apply(this,arguments)}function $(){return($=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,"csv");case 2:return a=e.sent,e.abrupt("return",J.fromCSV(a,{dynamicTyping:!0}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=a(19),G=a(76);function K(e,t){return function(e){var t=e.left.getColumnNames(),a=e.right.getColumnNames().map((function(t){return e.right.getSeries(t)}));function n(e){return a.reduce((function(a,n,r){return Object(u.a)(Object(u.a)({},a),{},Object(o.a)({},r,function(e,a){return t.reduce((function(t,n,r){return t+a.at(r)*e[n]}),0)}(e,n)))}),{})}var r=[];return e.left.forEach((function(e){var t=n(e);r.push(t)})),new q.DataFrame(r)}(function(){var a={data:t,shape:[]};function n(){G(a.shape.rows==r.shape.columns,"Matrix shapes do not match.")}var r=function(){var t;if(ee(e))t=e,Z(e);else{if(!te(e)&&!Array.isArray(e))throw"First term must be a data-forge DataFrame/Series or array.";t=new q.DataFrame({columns:{0:e}})}return{data:t,shape:Z(t)}}();if(ee(a.data))a.shape=Z(a.data),a.shape.rows!=r.shape.columns&&(G(a.shape.columns=r.shape.columns,"Matrix shapes do not match."),a.data=Q(a.data),a.shape=Z(a.data));else if(te(a.data))a.shape={rows:a.data.count(),columns:1},n(),a.data=a.data.inflate((function(e){return{0:e}}));else{if(!Array.isArray(a.data))throw"Second term must be an array or a DataFrame/Series.";a.shape=function(e){return{rows:e.length,columns:1}}(a.data),n(),a.data=new q.DataFrame({columns:{0:a.data}})}return{left:r.data,right:a.data}}())}function Q(e){var t={};return function(){var t;if(ee(e))t=e;else{if(!te(e)&&!Array.isArray(e))throw"Data must be an array or a DataFrame/Series.";t=new q.DataFrame({columns:{0:e}})}return t}().deflate().forEach((function(e,a){return t[a]=Object.values(e)})),new q.DataFrame({columns:t})}function Z(e){return{rows:e.count(),columns:e.getColumnNames().length}}var ee=function(e){return e instanceof q.DataFrame},te=function(e){return e instanceof q.Series},ae=a(19);function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ie();function n(){var a=Object(s.a)(Array(t+1).keys()).reduce((function(t,a,n){return Object(u.a)(Object(u.a)({},t),{},Object(o.a)({},n,e.select((function(e){return Math.pow(e,a)}))))}),{});return new ae.DataFrame({columns:a})}var r=n();return{xData:r,transposeX:Q(r),yData:a,m:r.count(),n:r.getColumnNames().length}}function re(e,t){var a=K(e.xData,t).getSeries("0"),n=function(){var t=[];return a.forEach((function(a,n){t.push(a-e.yData.at(n))})),t}();return{theta:t,values:a,errors:n,cost:function(){var t=e.yData.count();return n.reduce((function(e,t){return e+Math.pow(t,2)}),0)/(2*t)}()}}var ie=function(){return new ae.Series([])},ce=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(h.a)(this,a),(e=t.call(this)).fitLine=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.iter<e.state.settings.maxIter?Promise.all([new Promise((function(t){t(e.gradientDescent())})),b(e.state.prevCost*e.state.settings.intervalLength)]).then((function(t){if("active"===e.state.status){var a=t[0];e.setState(a)}})):e.setState({status:"complete"});case 1:case"end":return t.stop()}}),t)}))),e.handleStart=function(){if("clean"===e.state.status){var t=new Array(e.state.model.n).fill(0);e.setState({predictions:[re(e.state.model,t)]})}e.setState({status:"active"})},e.handlePause=function(){e.setState({status:"paused"})},e.handleReset=function(){e.setState((function(e){return{status:"clean",iter:0,prevCost:0,predictions:[]}}))},e.handleChangeSetting=function(t,a){e.setState({settings:Object(u.a)(Object(u.a)({},e.state.settings),{},Object(o.a)({},t,a))}),console.log(t,a)},e.state={testVal:0,data:new J.DataFrame({values:[]}),model:ne(),predictions:[],status:"clean",iter:0,prevCost:0,settings:{maxIter:"1000",learningRate:"1",precision:"0.001",intervalLength:"1000"}},e}return Object(m.a)(a,[{key:"importData",value:function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,U(t);case 3:e.t1=e.sent,e.t2={data:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("iris");case 2:t=e.sent,a=ne(t.getSeries("sepal_width"),1,t.getSeries("sepal_length")),this.setState({data:t,model:a,predictions:[]});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){"active"==this.state.status&&this.fitLine()}},{key:"gradientDescent",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r,i,c=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.predictions[this.state.predictions.length-1],a=function(){var e=K(t.errors,c.state.model.transposeX);return t.theta.map((function(t,a){return t-c.state.settings.learningRate/c.state.model.m*e.at(a)[0]}))},n=re(this.state.model,a()),r=(t.cost-n.cost)/t.cost,i={predictions:[].concat(Object(s.a)(this.state.predictions),[n]),iter:this.state.iter+1,prevCost:r},r<this.state.settings.precision&&(i.status="complete"),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{class:"container"},r.a.createElement(R,null,r.a.createElement(I,{size:"12"},r.a.createElement(A,{width:"925",height:"575",xData:this.state.model.xData.getSeries("1").toArray(),yData:this.state.model.yData.toArray(),lines:this.state.predictions}))),r.a.createElement(R,null,r.a.createElement(I,{size:"6"},r.a.createElement(B,{onChange:this.handleChangeSetting,stateSettings:this.state.settings,status:this.state.status})),r.a.createElement(I,{size:"6"},r.a.createElement(W,null,r.a.createElement(P,{onStart:this.handleStart,onPause:this.handlePause,onReset:this.handleReset,status:this.state.status})),"Iterations: ".concat(this.state.iter," "))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[43,1,2]]]);
//# sourceMappingURL=main.158ebe41.chunk.js.map